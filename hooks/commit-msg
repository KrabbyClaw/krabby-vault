#!/bin/bash
# commit-msg hook - Validate commit message format
# Place in .git/hooks/commit-msg

COMMIT_MSG_FILE=$1
COMMIT_MSG=$(head -1 "$COMMIT_MSG_FILE")

# Check for conventional commit format
if ! echo "$COMMIT_MSG" | grep -qE '^(feat|fix|docs|style|refactor|perf|test|chore|breaking|major)(\(.+\))?: .+'; then
    echo "⚠️  Warning: Commit message doesn't follow conventional commit format."
    echo ""
    echo "Expected format: <type>(<scope>): <description>"
    echo ""
    echo "Types:"
    echo "  feat:     → MINOR version bump (new feature)"
    echo "  fix:      → PATCH version bump (bug fix)"
    echo "  docs:     → PATCH version bump (documentation)"
    echo "  chore:    → PATCH version bump (maintenance)"
    echo "  breaking: → MAJOR version bump (breaking change)"
    echo ""
    echo "Your message: $COMMIT_MSG"
    echo ""
    echo "Version will still be bumped as PATCH."
    echo ""
fi

exit 0
